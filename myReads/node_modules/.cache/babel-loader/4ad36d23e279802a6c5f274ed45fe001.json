{"ast":null,"code":"var objectPath = require('object-path');\n\nvar sortBy;\nvar sort;\nvar type;\n/**\n * Filters args based on their type\n * @param  {String} type Type of property to filter by\n * @return {Function}\n */\n\ntype = function type(_type) {\n  return function (arg) {\n    return typeof arg === _type;\n  };\n};\n/**\n * Return a comparator function\n * @param  {String} property The key to sort by\n * @param  {Function} map Function to apply to each property\n * @return {Function}        Returns the comparator function\n */\n\n\nsort = function sort(property, map) {\n  var sortOrder = 1;\n\n  var apply = map || function (_, value) {\n    return value;\n  };\n\n  if (property[0] === \"-\") {\n    sortOrder = -1;\n    property = property.substr(1);\n  }\n\n  return function fn(a, b) {\n    var result;\n    var am = apply(property, objectPath.get(a, property));\n    var bm = apply(property, objectPath.get(b, property));\n    if (am < bm) result = -1;\n    if (am > bm) result = 1;\n    if (am === bm) result = 0;\n    return result * sortOrder;\n  };\n};\n/**\n * Return a comparator function that sorts by multiple keys\n * @return {Function} Returns the comparator function\n */\n\n\nsortBy = function sortBy() {\n  var args = Array.prototype.slice.call(arguments);\n  var properties = args.filter(type('string'));\n  var map = args.filter(type('function'))[0];\n  return function fn(obj1, obj2) {\n    var numberOfProperties = properties.length,\n        result = 0,\n        i = 0;\n    /* try getting a different result from 0 (equal)\n     * as long as we have extra properties to compare\n     */\n\n    while (result === 0 && i < numberOfProperties) {\n      result = sort(properties[i], map)(obj1, obj2);\n      i++;\n    }\n\n    return result;\n  };\n};\n/**\n * Expose `sortBy`\n * @type {Function}\n */\n\n\nmodule.exports = sortBy;","map":null,"metadata":{},"sourceType":"script"}