{"ast":null,"code":"(function (root, factory) {\n  'use strict';\n  /*istanbul ignore next:cant test*/\n\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else {\n    // Browser globals\n    root.objectPath = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var toStr = Object.prototype.toString,\n      _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  function isEmpty(value) {\n    if (!value) {\n      return true;\n    }\n\n    if (isArray(value) && value.length === 0) {\n      return true;\n    } else {\n      for (var i in value) {\n        if (_hasOwnProperty.call(value, i)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }\n\n  function toString(type) {\n    return toStr.call(type);\n  }\n\n  function isNumber(value) {\n    return typeof value === 'number' || toString(value) === \"[object Number]\";\n  }\n\n  function isString(obj) {\n    return typeof obj === 'string' || toString(obj) === \"[object String]\";\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && toString(obj) === \"[object Object]\";\n  }\n\n  function isArray(obj) {\n    return typeof obj === 'object' && typeof obj.length === 'number' && toString(obj) === '[object Array]';\n  }\n\n  function isBoolean(obj) {\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\n  }\n\n  function getKey(key) {\n    var intKey = parseInt(key);\n\n    if (intKey.toString() === key) {\n      return intKey;\n    }\n\n    return key;\n  }\n\n  function set(obj, path, value, doNotReplace) {\n    if (isNumber(path)) {\n      path = [path];\n    }\n\n    if (isEmpty(path)) {\n      return obj;\n    }\n\n    if (isString(path)) {\n      return set(obj, path.split('.'), value, doNotReplace);\n    }\n\n    var currentPath = getKey(path[0]);\n\n    if (path.length === 1) {\n      var oldVal = obj[currentPath];\n\n      if (oldVal === void 0 || !doNotReplace) {\n        obj[currentPath] = value;\n      }\n\n      return oldVal;\n    }\n\n    if (obj[currentPath] === void 0) {\n      if (isNumber(currentPath)) {\n        obj[currentPath] = [];\n      } else {\n        obj[currentPath] = {};\n      }\n    }\n\n    return set(obj[currentPath], path.slice(1), value, doNotReplace);\n  }\n\n  function del(obj, path) {\n    if (isNumber(path)) {\n      path = [path];\n    }\n\n    if (isEmpty(obj)) {\n      return void 0;\n    }\n\n    if (isEmpty(path)) {\n      return obj;\n    }\n\n    if (isString(path)) {\n      return del(obj, path.split('.'));\n    }\n\n    var currentPath = getKey(path[0]);\n    var oldVal = obj[currentPath];\n\n    if (path.length === 1) {\n      if (oldVal !== void 0) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1);\n        } else {\n          delete obj[currentPath];\n        }\n      }\n    } else {\n      if (obj[currentPath] !== void 0) {\n        return del(obj[currentPath], path.slice(1));\n      }\n    }\n\n    return obj;\n  }\n\n  var objectPath = {};\n\n  objectPath.ensureExists = function (obj, path, value) {\n    return set(obj, path, value, true);\n  };\n\n  objectPath.set = function (obj, path, value, doNotReplace) {\n    return set(obj, path, value, doNotReplace);\n  };\n\n  objectPath.insert = function (obj, path, value, at) {\n    var arr = objectPath.get(obj, path);\n    at = ~~at;\n\n    if (!isArray(arr)) {\n      arr = [];\n      objectPath.set(obj, path, arr);\n    }\n\n    arr.splice(at, 0, value);\n  };\n\n  objectPath.empty = function (obj, path) {\n    if (isEmpty(path)) {\n      return obj;\n    }\n\n    if (isEmpty(obj)) {\n      return void 0;\n    }\n\n    var value, i;\n\n    if (!(value = objectPath.get(obj, path))) {\n      return obj;\n    }\n\n    if (isString(value)) {\n      return objectPath.set(obj, path, '');\n    } else if (isBoolean(value)) {\n      return objectPath.set(obj, path, false);\n    } else if (isNumber(value)) {\n      return objectPath.set(obj, path, 0);\n    } else if (isArray(value)) {\n      value.length = 0;\n    } else if (isObject(value)) {\n      for (i in value) {\n        if (_hasOwnProperty.call(value, i)) {\n          delete value[i];\n        }\n      }\n    } else {\n      return objectPath.set(obj, path, null);\n    }\n  };\n\n  objectPath.push = function (obj, path\n  /*, values */\n  ) {\n    var arr = objectPath.get(obj, path);\n\n    if (!isArray(arr)) {\n      arr = [];\n      objectPath.set(obj, path, arr);\n    }\n\n    arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\n  };\n\n  objectPath.coalesce = function (obj, paths, defaultValue) {\n    var value;\n\n    for (var i = 0, len = paths.length; i < len; i++) {\n      if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n        return value;\n      }\n    }\n\n    return defaultValue;\n  };\n\n  objectPath.get = function (obj, path, defaultValue) {\n    if (isNumber(path)) {\n      path = [path];\n    }\n\n    if (isEmpty(path)) {\n      return obj;\n    }\n\n    if (isEmpty(obj)) {\n      return defaultValue;\n    }\n\n    if (isString(path)) {\n      return objectPath.get(obj, path.split('.'), defaultValue);\n    }\n\n    var currentPath = getKey(path[0]);\n\n    if (path.length === 1) {\n      if (obj[currentPath] === void 0) {\n        return defaultValue;\n      }\n\n      return obj[currentPath];\n    }\n\n    return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\n  };\n\n  objectPath.del = function (obj, path) {\n    return del(obj, path);\n  };\n\n  return objectPath;\n});","map":null,"metadata":{},"sourceType":"script"}