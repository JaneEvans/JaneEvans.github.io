(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/coffee_icon.352f327a.png"},19:function(e,t,a){e.exports=a.p+"static/media/starbucks_icon.d08e3832.png"},20:function(e,t,a){e.exports=a(48)},26:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),o=a.n(i),s=(a(26),a(3)),c=a(4),l=a(7),d=a(5),u=a(6),p=a(1),m=(a(8),a(17)),h=a.n(m),f=a(18),v=a.n(f),g=a(19),k=a.n(g),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={coffeeShops:[]},a.getCoffeeShops=function(){h.a.get("https://api.foursquare.com/v2/venues/explore?"+new URLSearchParams({client_id:"LY3VCLOLF2REAZE5GYWGDKPPYZJCUV2W42P1421UNMIUXR4I",client_secret:"DGTB0YFUFVD2ISY2NYK2A1JA2SB4QHD0NZNKRUEYAFEJYUD1",section:"coffee",near:"seattle",query:"best",openNow:1,limit:25,v:"20181212"})).then(function(e){var t=e.data.response.groups[0].items.filter(function(e){return void 0!==e.venue.location.address});a.setState({coffeeShops:t},a.renderGoogleAPI())}).catch(function(e){window.alert("ERROR: "+e)})},a.initMap=function(){var e=new window.google.maps.Map(document.getElementById("map"),{center:{lat:47.6079958,lng:-122.3320709},zoom:13});a.props.updateMap(e);var t=new window.google.maps.InfoWindow,n=[],r=[];a.state.coffeeShops.map(function(a){var i={lat:a.venue.location.lat,lng:a.venue.location.lng},o=a.venue.name,s=a.venue.id,c=a.venue.location.address,l={url:v.a,scaledSize:new window.google.maps.Size(30,30)};o.includes("Starbucks")&&(l.url=k.a,l.scaledSize=new window.google.maps.Size(40,40));var d=new window.google.maps.Marker({map:e,position:i,title:o,animation:window.google.maps.Animation.DROP,id:s,icon:l});n.push(d),r.push(d.id),d.addListener("click",function(){if(null!==d.getAnimation()?d.setAnimation(null):(d.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){d.setAnimation(null)},600)),e.setCenter(d.position),t.marker!==d){t.setContent(""),t.marker=d,t.addListener("closeclick",function(){t.marker=null});var a={location:e.getCenter(),query:o+", "+c};new window.google.maps.places.PlacesService(e).textSearch(a,function(e,a){if(a===window.google.maps.places.PlacesServiceStatus.OK){var n=e[0].formatted_address,r=e[0].rating,i=e[0].opening_hours?e[0].opening_hours.open_now?"Open":"Closed":"Unknown",s=e[0].price_level?"$".repeat(e[0].price_level):"Unknown",l=e[0].photos?e[0].photos[0].getUrl({maxWidth:120,maxHeight:120}):"",u='\n                    <div>\n                      <div id="photo">\n                        <img alt = "Image of the coffee shop: '.concat(o,'" src= ').concat(l,'>\n                      </div>  \n                      <div id="shop-info">\n                        <div id="shop-name">').concat(o,"</div>\n                        <div><strong>Address: </strong>").concat(n,"</div>\n                        <div><strong>Rating: </strong>").concat(r,"/5.0 </div>\n                        <div><strong>Price: </strong>").concat(s," </div>\n                        <div><strong>Is open?: </strong> ").concat(i," </div>\n                      </div>\n                    </div>\n                    ");t.setContent(u)}else t.setContent("\n                    <div id='shop-name'>".concat(d.title,"</div>\n                    <div><strong>Address: </strong>").concat(c,"</div>\n                    <div>No Shop Details Found</div>\n                    "))}),t.open(e,d)}})}),a.props.updateMarkers(n),a.props.updateMarkerIDs(r),a.props.updateFilteredMarkerIDs(r)},a.renderGoogleAPI=function(){a.getHTMLScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyAXcXV-sDo2jjYfRLVCmOIfhC7umOjkYGk&v=3&libraries=places&callback=initMap"),window.initMap=a.initMap},a.getHTMLScript=function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.insertBefore(a,t),a.onerror=function(){alert("Error loading "+this.src)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getCoffeeShops()}},{key:"render",value:function(){return r.a.createElement("div",{tabIndex:"0",id:"map"})}}]),t}(n.Component),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).showListing=function(){a.props.searchPlace_marker&&a.props.searchPlace_marker.setMap(null);var e=new window.google.maps.LatLngBounds;a.props.markers.map(function(t){t.setMap(a.props.map),e.extend(t.position),t.setAnimation(window.google.maps.Animation.DROP)}),a.props.map.fitBounds(e),a.props.updateFilteredMarkerIDs(a.props.markerIDs)},a.hideListing=function(){a.props.markers.map(function(e){e.setMap(null)}),a.props.updateFilteredMarkerIDs([])},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"show-hide-listings"},r.a.createElement("input",{tabIndex:"0",className:"button-icon",id:"show-listings",type:"button",value:"Show All \u2615",onClick:this.showListing}),r.a.createElement("input",{tabIndex:"0",className:"button-icon",id:"hide-listings",type:"button",value:"Hide All \u2615",onClick:this.hideListing}))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value,n=e.target.name,r=a.props.searchValues;r[n]=t,a.props.updateSearchValues(r);var i=new window.google.maps.places.Autocomplete(document.getElementById("search-within-time-text"),{types:["geocode"]});i.addListener("place_changed",function(){a.props.searchPlace_marker&&a.props.searchPlace_marker.setMap(null);var e=i.getPlace();r.from=e.name,console.log(e),a.props.map.setCenter(e.geometry.location);var t=new window.google.maps.Marker({map:a.props.map,position:e.geometry.location,title:e.name,animation:window.google.maps.Animation.DROP});a.props.updateSearchValues(r),a.props.updateSearchPlace_marker(t)})},a.handleSubmit=function(e){e.preventDefault(),a.searchWithinTime()},a.searchWithinTime=function(){var e=new window.google.maps.DistanceMatrixService,t=a.props.searchValues.from;if(""===t)window.alert("You must enter an address.");else{a.props.markers.map(function(e){e.setMap(null)});var n=[];a.props.markers.map(function(e){n.push(e.position)});var r=a.props.searchValues.mode;e.getDistanceMatrix({origins:n,destinations:[t],travelMode:window.google.maps.TravelMode[r],unitSystem:window.google.maps.UnitSystem.IMPERIAL},function(e,t){t!==window.google.maps.DistanceMatrixStatus.OK?(window.alert("Error was: "+t),console.log(window.google.maps.DistanceMatrixService)):a.displayMarkersWithinTime(e)})}},a.displayMarkersWithinTime=function(e){for(var t=a.props.searchValues.duration,n=e.originAddresses,r=!1,i=[],o=function(n){e.rows[n].elements.map(function(e){var o=e;if("OK"===o.status){var s=o.distance.text,c=o.duration.value/60,l=o.duration.text;if(c<=t){a.props.markers[n].setMap(a.props.map),i.push(a.props.markers[n].id),r=!0;var d=new window.google.maps.InfoWindow({content:l+" away, "+s});d.open(a.props.map,a.props.markers[n]),a.props.markers[n].infowindow=d,window.google.maps.event.addListener(a.props.markers[n],"click",function(){this.infowindow.close()})}a.props.updateFilteredMarkerIDs(i)}})},s=0;s<n.length;s++)o(s);r||window.alert("We could not find any locations within that distance!")},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{id:"search-form",onSubmit:this.handleSubmit,onChange:this.handleChange},r.a.createElement("div",{className:"search-div"},r.a.createElement("span",{className:"text"}," From "),r.a.createElement("input",{tabIndex:"0",id:"search-within-time-text",name:"from",type:"text",placeholder:"Ex: Pike Market"})),r.a.createElement("div",{className:"search-div"},r.a.createElement("span",{className:"text"}," Transportation "),r.a.createElement("div",{className:"radio-text"},r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"mode",value:"WALKING",defaultChecked:!0}),"\ud83d\udeb6 Walk "),r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"mode",value:"BICYCLING"}),"\ud83d\udeb2 Bike "),r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"mode",value:"DRIVING"}),"\ud83d\ude97 Drive "))),r.a.createElement("div",{className:"search-div"},r.a.createElement("span",{className:"text"}," Within "),r.a.createElement("div",{className:"radio-text"},r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"duration",value:"5",defaultChecked:!0}),"5 min "),r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"duration",value:"10"}),"10 min "),r.a.createElement("ul",null,r.a.createElement("input",{tabIndex:"0",type:"radio",name:"duration",value:"15"}),"15 min "))),r.a.createElement("button",{tabIndex:"0",className:"button-icon",id:"search-within-time"},"Find Me Coffee"))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).openSideBar=function(){var e=a.props.sideBarClass;e="options-box-responsive-open"===e?"options-box-responsive-close":"options-box-responsive-open",a.props.updateSideBarClass(e)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"side-bar-button-div"},r.a.createElement("button",{id:"side-bar-button",tabIndex:"0",onClick:this.openSideBar},"\ud83d\udd0d"))}}]),t}(n.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"shop-list-view"},this.props.markers.filter(function(t){return e.props.filteredMarkerIDs.includes(t.id)}).map(function(e){return r.a.createElement("ul",{key:e.id},r.a.createElement("a",{tabIndex:"0",href:"#",onClick:function(){window.google.maps.event.trigger(e,"click")}},e.title))}),r.a.createElement("ul",{key:"null"}))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={map:"",markers:[],markerIDs:[],filteredMarkerIDs:[],searchPlace_marker:null,searchValues:{duration:"5",mode:"WALKING",from:""},sideBarClass:"options-box"},a.updateMap=a.updateMap.bind(Object(p.a)(Object(p.a)(a))),a.updateMarkers=a.updateMarkers.bind(Object(p.a)(Object(p.a)(a))),a.updateMarkerIDs=a.updateMarkerIDs.bind(Object(p.a)(Object(p.a)(a))),a.updateFilteredMarkerIDs=a.updateFilteredMarkerIDs.bind(Object(p.a)(Object(p.a)(a))),a.updateSearchValues=a.updateSearchValues.bind(Object(p.a)(Object(p.a)(a))),a.updateSearchPlace_marker=a.updateSearchPlace_marker.bind(Object(p.a)(Object(p.a)(a))),a.updateSideBarClass=a.updateSideBarClass.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateMap",value:function(e){this.setState({map:e})}},{key:"updateMarkers",value:function(e){this.setState({markers:e})}},{key:"updateMarkerIDs",value:function(e){this.setState({markerIDs:e})}},{key:"updateFilteredMarkerIDs",value:function(e){this.setState({filteredMarkerIDs:e})}},{key:"updateSearchValues",value:function(e){this.setState({searchValues:e})}},{key:"updateSearchPlace_marker",value:function(e){this.setState({searchPlace_marker:e})}},{key:"updateSideBarClass",value:function(e){this.setState({sideBarClass:e})}},{key:"render",value:function(){var e=this.state,t=e.map,a=e.markers,n=e.markerIDs,i=e.filteredMarkerIDs,o=e.searchPlace_marker,s=e.searchValues,c=e.sideBarClass;return r.a.createElement("div",{className:"canvas"},r.a.createElement("div",{className:"head"},r.a.createElement("h1",null,"Seattle Coffee Radar"),r.a.createElement(S,{sideBarClass:c,updateSideBarClass:this.updateSideBarClass}),r.a.createElement("hr",{className:"shadow"})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:this.state.sideBarClass,id:"side-bar"},r.a.createElement("h2",null,"Find Seattle Best Coffee Shop"),r.a.createElement("hr",{className:"gradient"}),r.a.createElement(b,{map:t,markers:a,searchPlace_marker:o,markerIDs:n,updateFilteredMarkerIDs:this.updateFilteredMarkerIDs}),r.a.createElement("h4",null,"Coffee Shop List"),r.a.createElement(M,{markers:a,filteredMarkerIDs:i}),r.a.createElement("h3",null,"Search Your Coffee Shop"),r.a.createElement("hr",{className:"gradient"}),r.a.createElement(E,{map:t,searchValues:s,searchPlace_marker:o,markers:a,updateSearchValues:this.updateSearchValues,updateSearchPlace_marker:this.updateSearchPlace_marker,updateFilteredMarkerIDs:this.updateFilteredMarkerIDs})),r.a.createElement(w,{updateMap:this.updateMap,updateMarkers:this.updateMarkers,updateMarkerIDs:this.updateMarkerIDs,updateFilteredMarkerIDs:this.updateFilteredMarkerIDs})),r.a.createElement("div",{id:"footer"},"Copyright (c) 2019 ",r.a.createElement("a",{tabIndex:"0",href:"./"},r.a.createElement("strong",null,"Seattle Coffee Radar"))," All Rights Reserved."))}}]),t}(n.Component),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(I,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");O?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}()},8:function(e,t,a){}},[[20,2,1]]]);
//# sourceMappingURL=main.3cd28d3b.chunk.js.map